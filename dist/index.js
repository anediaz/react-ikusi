"use strict";function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}var e,t,i,r,o,l,a,c,u,s,m,d,f,h,g=n(require("@babel/runtime/helpers/taggedTemplateLiteralLoose")),p=require("react"),b=n(p),x=n(require("prop-types")),v=n(require("underscore")),w=require("styled-components"),E=n(w),y=w.keyframes(e||(e=g(["\n  0%{\n    transform: rotate(0deg);\n  }\n  50%{\n    transform: rotate(360deg);\n  }\n  100%{\n    transform: rotate(720deg);\n  }\n"]))),k=E.div(t||(t=g(["\n  position: absolute;\n  border: 0.1rem solid;\n  border-radius: 50%;\n  float: left;\n"]))),C=E(k)(i||(i=g(["\n  height: 3rem;\n  width: 3rem;\n  left: calc(50% - 1.5rem);\n  top: calc(50% - 1.5rem);\n  border-color: deepskyblue;\n  border-left: none;\n  animation: "," 8s linear infinite;\n"])),y),q=E(k)(r||(r=g(["\n  height: 2rem;\n  width: 2rem;\n  left: calc(50% - 1rem);\n  top: calc(50% - 1rem);\n  border-color: deeppink;\n  border-top: none;\n  animation: "," 3s linear infinite;\n"])),y),z=E(k)(o||(o=g(["\n  height: 1rem;\n  width: 1rem;\n  left: calc(50% - 0.5rem);\n  top: calc(50% - 0.5rem);\n  border-color: lightseagreen;\n  border-right: none;\n  animation: "," 5s linear infinite;\n"])),y),L=function(){return b.createElement("div",{className:"Loader"},b.createElement(C,null),b.createElement(q,null),b.createElement(z,null))},P=E.div(l||(l=g(["\n  display: ",";\n  flex-direction: column;\n  justify-content: center;\n  height: 100%;\n  align-items: center;\n  left: 0px;\n  position: fixed;\n  top: 0px;\n  width: 100%;\n  z-index: 2001;\n  background: rgba(0, 0, 0, 0.8);\n"])),(function(n){return n.isActive?"flex":"none"})),R=E.div(a||(a=g(["\n  width: 100%;\n  overflow: auto;\n  text-align: center;\n"]))),W=E.div(c||(c=g(["\n  text-align: center;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  @media (orientation: landscape) {\n    height: 75%;\n  }\n  @media (orientation: portrait) {\n    max-height: 60%;\n  }\n"]))),S=E.img(u||(u=g(["\n  margin: 0 auto;\n  max-height: 100%;\n  max-width: 80%;\n"]))),N=E.div(s||(s=g(["\n  width: 5%;\n  visibility: ",";\n  @media (orientation: portrait) {\n    margin: 0 auto;\n  }\n"])),(function(n){return n.enabled?"visible":"hidden"})),j=E.span(m||(m=g(["\n  color: white;\n  font-size: ",";\n  opacity: 0.6;\n  @media (max-width: 768px) {\n    font-size: ",";\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n  @media (min-width: 1920px) {\n    font-size: 125px;\n  }\n"])),(function(n){return"small"===n.fontSize?"35px":"50px"}),(function(n){return"small"===n.fontSize?"35px":"40px"})),B={img:x.string.isRequired,onClose:x.func,onNext:x.func,onPrev:x.func},H=function(n){var e=n.img,t=n.onClose,i=n.onNext,r=n.onPrev;return b.createElement(P,{isActive:Boolean(e)},b.createElement(R,null,b.createElement(j,{onClick:function(){return t()},fontSize:"big"},"Ã—")),b.createElement(W,null,b.createElement(N,{enabled:Boolean(r)},b.createElement(j,{onClick:function(){return r?r():null}},"<")),b.createElement(S,{src:e,alt:""}),b.createElement(N,{enabled:Boolean(i)},b.createElement(j,{onClick:function(){return i?i():null}},">"))))};H.propTypes=B,H.defaultProps={img:null,onClose:function(){}};var T={configurations:x.arrayOf(x.shape({cols:x.number.isRequired,margin:x.number.isRequired,maxWidth:x.number,minWidth:x.number})),photos:x.arrayOf(x.shape({src:x.string.isRequired,width:x.number.isRequired,height:x.number.isRequired,bigSrc:x.string})).isRequired,withLightbox:x.bool,onClickPhoto:x.func},A=E.div(d||(d=g(["\n  margin-top: 0.2rem;\n  width: 100%;\n"]))),O=E.div(f||(f=g(["\n  width: 100%;\n  margin: ",";\n  display: flex;\n  justify-content: space-evenly;\n  text-align: center;\n  height: ",";\n"])),(function(n){return n.margin+"px 0"}),(function(n){return n.height+"px"})),D=E.img(h||(h=g(["\n  height: 100%;\n  width: auto;\n  &:hover {\n    cursor: ",";\n    opacity: 0.5;\n  }\n"])),(function(n){return n.onClick?"pointer":"default"})),F=function(n,e){var t=n.find((function(n){var t=n.minWidth,i=n.maxWidth;return(t&&t<=e||!t)&&(i&&i>=e||!i)}));return{width:e,cols:t.cols||7,margin:t.margin||1}},I=function(n){var e=n.photos,t=n.configurations,i=n.withLightbox,r=n.onClickPhoto,o=p.useRef(null),l=p.useState(null),a=l[0],c=l[1],u=p.useState(F(t,window.screen.width)),s=u[0],m=u[1],d=function(){return o.current.offsetWidth||0};p.useEffect((function(){var n=v.debounce((function(){return m(F(t,d()))}),400);return window.addEventListener("resize",n),m(F(t,d())),function(){return window.removeEventListener("resize",n)}}),[t]);var f,h=function(){return c(null)},g=function(){return 0===a},x=function(){return a===e.length-1},w=function(){return x()?null:c(a+1)},E=function(){return g()?null:c(a-1)},y=function(n){var e=s.width,t=s.cols,i=s.margin,r=0;return n.forEach((function(n){r+=n.width/n.height})),(e-1-t*i*2)/r},k=function(n){for(var e=[].concat(n),t=[];e.length;){var i=e.splice(0,s.cols);t.push({photos:i,lineHeight:y(i)})}return t}(e);return b.createElement(A,{ref:o,onKeyDown:function(n){if(!isNaN(a))switch(n.keyCode){case 37:!g()&&E();break;case 39:!x()&&w();break;case 27:h()}},tabIndex:"0"},e.length?b.createElement(p.Fragment,null,k.map((function(n,e){return n.lineHeight?b.createElement(O,{height:n.lineHeight,margin:s.margin,key:"line-"+e},n.photos.map((function(n,t){var o=e*s.cols+t;return b.createElement(D,{src:n.src,alt:"",key:"item-"+t,onClick:function(){return function(n,e){i&&c(n),r(e)}(o,n.id)}})}))):b.createElement(L,null)})),i&&null!==a&&b.createElement(H,{img:(f=a,null!==f&&e.length>=f&&e[f]?e[f].bigSrc||e[f].src:null),onClose:h,onNext:x()?null:w,onPrev:g()?null:E})):b.createElement(L,null))};I.propTypes=T,I.defaultProps={configurations:[{maxWidth:340,cols:4,margin:1},{maxWidth:1024,cols:6,margin:1},{minWidth:1025,cols:12,margin:1}],withLightbox:!0,onClickPhoto:function(){}},module.exports=I;
