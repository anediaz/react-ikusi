"use strict";function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}var e=n(require("@babel/runtime/helpers/taggedTemplateLiteralLoose")),t=require("react"),r=n(t),i=n(require("prop-types")),o=n(require("underscore")),u=require("styled-components"),a=n(u);function l(){var n=e(["\n  height: 1rem;\n  width: 1rem;\n  left: calc(50% - 0.5rem);\n  top: calc(50% - 0.5rem);\n  border-color: lightseagreen;\n  border-right: none;\n  animation: "," 5s linear infinite;\n"]);return l=function(){return n},n}function c(){var n=e(["\n  height: 2rem;\n  width: 2rem;\n  left: calc(50% - 1rem);\n  top: calc(50% - 1rem);\n  border-color: deeppink;\n  border-top: none;\n  animation: "," 3s linear infinite;\n"]);return c=function(){return n},n}function f(){var n=e(["\n  height: 3rem;\n  width: 3rem;\n  left: calc(50% - 1.5rem);\n  top: calc(50% - 1.5rem);\n  border-color: deepskyblue;\n  border-left: none;\n  animation: "," 8s linear infinite;\n"]);return f=function(){return n},n}function s(){var n=e(["\n  position: absolute;\n  border: 0.1rem solid;\n  border-radius: 50%;\n  float: left;\n"]);return s=function(){return n},n}function m(){var n=e(["\n  0%{\n    transform: rotate(0deg);\n  }\n  50%{\n    transform: rotate(360deg);\n  }\n  100%{\n    transform: rotate(720deg);\n  }\n"]);return m=function(){return n},n}var d=u.keyframes(m()),h=a.div(s()),g=a(h)(f(),d),p=a(h)(c(),d),v=a(h)(l(),d),x=function(){return r.createElement("div",{className:"Loader"},r.createElement(g,null),r.createElement(p,null),r.createElement(v,null))};function b(){var n=e(["\n  color: white;\n  font-size: ",";\n  opacity: 0.6;\n  @media (max-width: 768px) {\n    font-size: ",";\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n  @media (min-width: 1920px) {\n    font-size: 125px;\n  }\n"]);return b=function(){return n},n}function w(){var n=e(["\n  width: 5%;\n  @media (orientation: portrait) {\n    margin: 0 auto;\n  }\n"]);return w=function(){return n},n}function E(){var n=e(["\n  margin: 0 auto;\n  height: 100%;\n"]);return E=function(){return n},n}function y(){var n=e(["\n  text-align: center;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  @media (orientation: landscape) {\n    height: 75%;\n  }\n  @media (orientation: portrait) {\n    height: 60%;\n  }\n"]);return y=function(){return n},n}function q(){var n=e(["\n  width: 100%;\n  overflow: auto;\n  text-align: center;\n"]);return q=function(){return n},n}function k(){var n=e(["\n  display: ",";\n  flex-direction: column;\n  justify-content: center;\n  height: 100%;\n  align-items: center;\n  left: 0px;\n  position: fixed;\n  top: 0px;\n  width: 100%;\n  z-index: 2001;\n  background: rgba(0, 0, 0, 0.8);\n"]);return k=function(){return n},n}var z=a.div(k(),(function(n){return n.isActive?"flex":"none"})),C=a.div(q()),L=a.div(y()),R=a.img(E()),W=a.div(w()),S=a.span(b(),(function(n){return"small"===n.fontSize?"35px":"50px"}),(function(n){return"small"===n.fontSize?"35px":"40px"})),P={img:i.string.isRequired,onClose:i.func,onNext:i.func,onPrev:i.func},j=function(n){var e=n.img,t=n.onClose,i=n.onNext,o=n.onPrev;return r.createElement(z,{isActive:Boolean(e)},r.createElement(C,null,r.createElement(S,{onClick:function(){return t()},fontSize:"big"},"Ã—")),r.createElement(L,null,o?r.createElement(W,null,r.createElement(S,{onClick:function(){return o()}},"<")):null,r.createElement(R,{src:e,alt:""}),i?r.createElement(W,null,r.createElement(S,{onClick:function(){return i()}},">")):null))};function N(){var n=e(["\n  height: 100%;\n  width: auto;\n  &:hover {\n    cursor: ",";\n    opacity: 0.5;\n  }\n"]);return N=function(){return n},n}function H(){var n=e(["\n  width: 100%;\n  margin: ",";\n  display: flex;\n  justify-content: space-evenly;\n  text-align: center;\n  height: ",";\n"]);return H=function(){return n},n}function T(){var n=e(["\n  margin-top: 0.2rem;\n  width: 100%;\n"]);return T=function(){return n},n}j.propTypes=P,j.defaultProps={img:null,onClose:function(){}};var A={configurations:i.arrayOf(i.shape({cols:i.number.isRequired,margin:i.number.isRequired,maxWidth:i.number,minWidth:i.number})),photos:i.arrayOf(i.shape({src:i.string.isRequired,width:i.number.isRequired,height:i.number.isRequired,bigSrc:i.string})).isRequired,withLightbox:i.bool},O=a.div(T()),B=a.div(H(),(function(n){return n.margin+"px 0"}),(function(n){return n.height+"px"})),F=a.img(N(),(function(n){return n.onClick?"pointer":"default"})),D=function(n,e){var t=n.find((function(n){var t=n.minWidth,r=n.maxWidth;return(t&&t<=e||!t)&&(r&&r>=e||!r)}));return{width:e,cols:t.cols||7,margin:t.margin||1}},G=function(n){var e=n.photos,i=n.configurations,u=n.withLightbox,a=t.useRef(null),l=t.useState(null),c=l[0],f=l[1],s=t.useState(D(i,window.screen.width)),m=s[0],d=s[1],h=function(){return a.current.offsetWidth||0};t.useEffect((function(){var n=o.debounce((function(){return d(D(i,h()))}),400);return window.addEventListener("resize",n),d(D(i,h())),function(){return window.removeEventListener("resize",n)}}),[i]);var g,p=function(n){var e=m.width,t=m.cols,r=m.margin,i=0;return n.forEach((function(n){i+=n.width/n.height})),(e-1-t*r*2)/i},v=function(n){for(var e=[].concat(n),t=[];e.length;){var r=e.splice(0,m.cols);t.push({photos:r,lineHeight:p(r)})}return t}(e);return r.createElement(O,{ref:a},e.length?r.createElement(t.Fragment,null,v.map((function(n,e){return n.lineHeight?r.createElement(B,{height:n.lineHeight,margin:m.margin,key:"line-"+e},n.photos.map((function(n,t){var i=e*m.cols+t;return r.createElement(F,{src:n.src,alt:"",key:"item-"+t,onClick:u?function(){return f(i)}:null})}))):r.createElement(x,null)})),u&&null!==c&&r.createElement(j,{img:(g=c,null!==g&&e.length>=g&&e[g]?e[g].bigSrc||e[g].src:null),onClose:function(){return f(null)},onNext:e.length-1>c?function(){return c<e.length?f(c+1):null}:null,onPrev:c>0?function(){return c>0?f(c-1):null}:null})):r.createElement(x,null))};G.propTypes=A,G.defaultProps={configurations:[{maxWidth:340,cols:4,margin:1},{maxWidth:1024,cols:6,margin:1},{minWidth:1025,cols:12,margin:1}],withLightbox:!0},module.exports=G;
